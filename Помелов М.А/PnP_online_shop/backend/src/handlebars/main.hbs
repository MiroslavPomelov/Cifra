<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
    <style>
        body {
            background-image: url("http://localhost:3000/images/carousel/codioful-formerly-gradienta-bKESVqfxass-unsplash.jpg");
        }
    </style>
    <link rel="stylesheet" href="http://localhost:3000/css/style.css">

    <header>
        <div class="header_menu">
            <h2 class="logo">P&P Co.</h2>
            <nav class="navigation">
                <a href="#">Домашняя страница</a>
                <a href="#">О нас</a>
                <a href="#">Акции</a>
                <a href="#">Контакты</a>
            </nav>

            <!-- КОРЗИНА -->
            <div class="basket" id="basket">
                <i class="fa-solid fa-basket-shopping" id="cartIcon"></i>
            </div>


            <a class="userNameHead">{{username}}</a>
            <button class="btnLogin-popup">{{textBtn}}</button>
        </div>
        <div class="error-message" id="errorMessage"></div>


        <div class="header_burgers">
            <div class="catalog_block">

                <p class="catalog_block_text">Каталог</p>
                <!-- BURGER -->
                <div class="menu">
                    <input type="checkbox" id="burger-checkbox" class="burger-checkbox">
                    <label for="burger-checkbox" class="burger"></label>
                    <ul class="menu-list">
                        <li class="menu_variant">
                            <a class="menu-item">Диваны</a>
                            <div class="menu__drop-variants-list">
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Угловые</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Прямые</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Раскладные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Выдвижные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Раздвижные</a>
                                </div>
                            </div>
                        </li>

                        <li class="menu_variant">
                            <a class="menu-item">Кровати</a>
                            <div class="menu__drop-variants-list">
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Детские</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Односпальные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Полутороспальные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Двуспальные</a>
                                </div>
                            </div>
                        </li>

                        <li class="menu_variant">
                            <a class="menu-item">Кресла</a>
                            <div class="menu__drop-variants-list">
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Классические</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Кресло-стул</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Раскладные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Кресло-реклайнер</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Кресло-качалка</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Кресло-понг</a>
                                </div>
                            </div>
                        </li>


                        <li class="menu_variant">
                            <a class="menu-item">Стулья</a>
                            <div class="menu__drop-variants-list">
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для дома</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Офисные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Специального назначения</a>
                                </div>
                            </div>
                        </li>


                        <li class="menu_variant">
                            <a class="menu-item">Столы</a>
                            <div class="menu__drop-variants-list">
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Прямые</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Угловые</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Круглые</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Обеденные</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Рабочие</a>

                                    <div class="menu__variant-item">
                                        <a class="menu__move-link">Кофейные</a>
                                    </div>
                                    <div class="menu__variant-item">
                                        <a class="menu__move-link">Компьютерные</a>
                                    </div>
                                </div>
                        </li>


                        <li class="menu_variant">
                            <a class="menu-item">Шкафы</a>
                            <div class="menu__drop-variants-list">
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для гардероба</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для прихожих</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для спален</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для гостинных</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для детских</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для кухонь</a>
                                </div>
                                <div class="menu__variant-item">
                                    <a class="menu__move-link">Для кабинетов</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>


            <!-- ПОИСК -->
            <div class="search_block">
                <form>
                    <input type="text" name="text" class="search" placeholder="Поиск">
                    <input type="submit" name="submit" class="submit" value="">
                </form>
            </div>
    </header>


    <div class="cart-popup" id="cartPopup">
        <span class="icon-closes-basket" id="icon-closes-basket">
            <i class="fa-solid fa-xmark"></i>
        </span>
        <div class="cart-content">
            <h2>Корзина</h2>
            <ul class="basket-ul">
                <li>Товар 1 - $10</li>
                <li>Товар 2 - $15</li>
                <li>Товар 3 - $20</li>
            </ul>
            <p>Итого: $45</p>
            <button class="basket-btn">Оформить заказ</button>
        </div>
    </div>

    <!-- ЛИЧНЫЙ КАБИНЕТ -->

    <div class="user-personal">
        <span class="icon-closes">
            <i class="fa-solid fa-xmark"></i>
        </span>
        <h2 class="user-personal-h2">Личный кабинет</h2>
        <div class="user-pers">
            <div class="user-personal-info">
                <div class="user-personal-info-text">
                    <p class="user-personal-p">Имя пользователя: </p>
                    <p class="user-personal_username"></p>
                </div>

                <p class="user-personal-p">Ваше имя: </p>
                <div class="user-personal-info-text">
                    <input class="user-personal-input-firstname" type="text">
                    <button type="submit" class="user-personal-btn-firstname">Изменить</button>
                </div>

                <p class="user-personal-p">Ваша фамилия: </p>
                <div class="user-personal-info-text">
                    <input class="user-personal-input-lastname" type="text">
                    <button type="submit" class="user-personal-btn-lastname">Изменить</button>
                </div>

                <div class="user-personal-info-text">
                    <p class="user-personal-p">Возраст: </p>
                    <p class="user-personal-input-age"></p>
                </div>

                <a class="user-personal-password">Изменить пароль?</a>
                <div class="user-personal-info-text">
                    <p class="user-personal-p">На ваш почтовый ящик будет отправлено письмо для смены пароля </p>
                </div>
            </div>


            <div class="user-history-info">
                <p class="user-history-p">История заказов: </p>
            </div>
        </div>
    </div>


    <div id="carouselExampleIndicators" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <style>
            .carousel-inner {
                width: 1620px;
                height: 300px;
                object-fit: cover;
            }
        </style>
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner rounded-3">
            <div class="carousel-item active" data-bs-interval="7000">
                <img src="http://localhost:3000/images/carousel/banner-1.png" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item" data-bs-interval="7000">
                <img src="http://localhost:3000/images/carousel/banner-2.png" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item" data-bs-interval="7000">
                <img src="http://localhost:3000/images/carousel/banner-3.png" class="d-block w-100" alt="...">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>


        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"></script>
    </div>

    <div class="wrapper">
        <span class="icon-close">
            <i class="fa-solid fa-xmark"></i>
        </span>

        <!-- ФОРМА ВХОДА -->
        <div class="form-box auth">
            <h2>Войти</h2>
            <form action="http://localhost:3000/auth" method="POST">
                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-envelope"></i>
                    </span>
                    <input type="text" name="username" required>
                    <label>Логин</label>
                </div>
                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-lock"></i>
                    </span>
                    <input type="password" name="password" required>
                    <label>Пароль</label>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox">Запомнить меня</label>
                    <a href="#">Забыли пароль?</a>
                </div>
                <button class="btn-enter" type="submit">Войти</button>
                <div class="auth-registration">
                    <p>Еще нет аккаунта? <a href="#" class="registration-link">Зарегистрироваться</a></p>
                </div>
            </form>
        </div>


        <!-- section + DOM -->
        <!-- ФОРМА РЕГИСТРАЦИИ -->

        <div class="form-box registration">
            <h2>Регистрация</h2>
            <form action="http://localhost:3000/registration-page" method="POST">

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-user"></i>
                    </span>
                    <input type="text" id="username" name="username" required>
                    <label>Имя пользователя</label>
                </div>

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-pen"></i>
                    </span>
                    <input type="text" id="firstname" name="firstname" required>
                    <label>Введите имя</label>
                </div>

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-pen"></i>
                    </span>
                    <input type="text" id="lastname" name="lastname" required>
                    <label>Введите фамилию</label>
                </div>

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-envelope"></i>
                    </span>
                    <input type="email" id="email" name="email" required>
                    <label>Адрес электроной почты</label>
                </div>

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-unlock"></i>
                    </span>
                    <input type="password" id="password" name="password" required>
                    <label>Придумайте пароль</label>
                </div>

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-lock"></i>
                    </span>
                    <input type="password" name="passwordRepeat" required>
                    <label>Повторите пароль</label>
                </div>

                <div class="auth-box">
                    <span class="icon">
                        <i class="fa-solid fa-calendar"></i>
                    </span>
                    <input type="age" name="age" required>
                    <label>Введите ваш возраст</label>
                </div>

                <div class="remember-forgot">
                    <label><input type="checkbox" checked required>Я принимаю условия персональных данных</label>
                </div>
                <button class="btn-enter" type="submit">Зарегистрироваться</button>
                <div class="auth-registration">
                    <p>Уже есть аккаунт?<a href="#" class="auth-link"> Войти</a></p>
                </div>
            </form>
        </div>


        <script src={{script}}></script>


    </div>


    <div class="main">

        {{!-- <div class="card">
            <img class="card_img" src="http://localhost:3000/images/carousel/a6c31395b22511efaf86c2a772d65421.png"
                alt="#">
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium voluptatibus
                culpa pariatur voluptatem nam porro sed, ad expedita iste exercitationem magni quasi nihil quo ipsam
                quis eaque, mollitia animi vitae?</p>
            <button class="buyProduct">Купить</button>
        </div>

        <div class="card">
            <img class="card_img" src="http://localhost:3000/images/carousel/a6c31395b22511efaf86c2a772d65421.png"
                alt="#">
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium voluptatibus
                culpa pariatur voluptatem nam porro sed, ad expedita iste exercitationem magni quasi nihil quo ipsam
                quis eaque, mollitia animi vitae?</p>
            <button class="buyProduct">Купить</button>
        </div>

        <div class="card">
            <img class="card_img" src="http://localhost:3000/images/carousel/a6c31395b22511efaf86c2a772d65421.png"
                alt="#">
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium voluptatibus
                culpa pariatur voluptatem nam porro sed, ad expedita iste exercitationem magni quasi nihil quo ipsam
                quis eaque, mollitia animi vitae?</p>
            <button class="buyProduct">Купить</button>
        </div>

        <div class="card">
            <img class="card_img" src="http://localhost:3000/images/carousel/a6c31395b22511efaf86c2a772d65421.png"
                alt="#">
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium voluptatibus
                culpa pariatur voluptatem nam porro sed, ad expedita iste exercitationem magni quasi nihil quo ipsam
                quis eaque, mollitia animi vitae?</p>
            <button class="buyProduct">Купить</button>
        </div>

        <div class="card">
            <img class="card_img" src="http://localhost:3000/images/carousel/a6c31395b22511efaf86c2a772d65421.png"
                alt="#">
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium voluptatibus
                culpa pariatur voluptatem nam porro sed, ad expedita iste exercitationem magni quasi nihil quo ipsam
                quis eaque, mollitia animi vitae?</p>
            <button class="buyProduct">Купить</button>
        </div>

        <div class="card">
            <img class="card_img" src="http://localhost:3000/images/carousel/a6c31395b22511efaf86c2a772d65421.png"
                alt="#">
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium voluptatibus
                culpa pariatur voluptatem nam porro sed, ad expedita iste exercitationem magni quasi nihil quo ipsam
                quis eaque, mollitia animi vitae?</p>
            <button class="buyProduct">Купить</button>
        </div> --}}




        <script>
            const product_type = document.querySelectorAll(".menu__move-link");
            const carousel = document.querySelector(".carousel");


            product_type.forEach(element => {
                element.addEventListener('click', async (event) => {
                    event.preventDefault();

                    const newCarousel = document.getElementById("carouselExampleIndicators");
                    newCarousel.style.display = "none";

                    const moveLink = document.querySelector('.menu__move-link');
                    const parentLi = moveLink.closest('.menu_variant');
                    const menuItem = parentLi.querySelector('.menu-item');

                    const category = menuItem.textContent;
                    const type = element.textContent.toLowerCase();


                    try {
                        const response = await fetch(`http://localhost:3000/products?category=${category}&type=${type}`);

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const data = await response.json(); // Добавил JSON на всякий
                        console.log(data[0].quantity);

                        // Cards
                        for (let i = 0; i < data[0].quantity; i++) {
                            const main = document.querySelector(".main");
                            const newCard = createCard(`${category}`, `${type}`, 'http://localhost:3000/images/entitiesImages/0.png');
                            main.appendChild(newCard);
                        }


                    } catch (err) {
                        console.error('Fetch error:', err);
                    }
                })
            });




            function createCard(title, description, imageUrl) {
                // Создание карточки
                const main = document.querySelector(".main");
                const card = document.createElement('div');
                card.className = 'card';

                const cardTitle = document.createElement('h5');
                cardTitle.className = 'card-title';
                cardTitle.textContent = title;

                const img = document.createElement('img');
                img.src = imageUrl;
                img.alt = title;
                img.className = 'card_img';

                const cardDescription = document.createElement('p');
                cardDescription.className = 'description';
                cardDescription.textContent = description;

                const button = document.createElement('button');
                button.className = 'buyProduct';
                button.textContent = 'Купить';

                // Сборка
                card.appendChild(cardTitle);
                card.appendChild(img);
                card.appendChild(cardDescription);
                card.appendChild(button);
                main.appendChild(card);

                return card;
            }

        </script>
    </div>


    <footer>
        <link rel="stylesheet" href="http://localhost:3000/css/footerStyle.css">

        <div class="footer-row">
            <div class="footer-row_info">
                <h5 class="footer-row_info_h5">О нас</h5>
                <p class="footer-row_contacts_list_p">
                    Мы предлагаем широкий выбор товара, наличие на складе, быструю доставку и доступные цены.
                </p>
            </div>

            <div class="footer-row_contacts">
                <h5 class="footer-row_info_h5">Контакты</h5>
                <ul class="footer-row_contacts_list">
                    <li>
                        <p class="footer-row_contacts_list_p">Email: P&P@gmail.com</p>
                    </li>
                    <li>
                        <p class="footer-row_contacts_list_p">Телефон: +7 800 555 3535</p>
                    </li>
                    <li>
                        <p class="footer-row_contacts_list_p">Адрес: ул. Мебельная 15, Москва, Россия</p>
                    </li>
                </ul>
            </div>

            <div class="footer-row_social">
                <h5 class="footer-row_info_h5">Следите за нами</h5>
                <div class="footer-row_social_link-box">
                    <a href="#"><img style="width: 30px" src="http://localhost:3000/images/icons/telegram-icon.png"
                            alt="tg" /></a>
                    <a href="#"><img style="width: 30px" src="http://localhost:3000/images/icons/twitter-icon.png"
                            alt="twitter" /></a>
                    <a href="#"><img style="width: 30px" src="http://localhost:3000/images/icons/vk-icon.png"
                            alt="vk" /></a>
                </div>
            </div>
        </div>

        <div class="footer-text">
            <h5 class="footer-text_h5">© 2024 Передовая электроника: все права защищены</h5>
        </div>
    </footer>

    {{!-- Иконки --}}
    <script src="https://kit.fontawesome.com/281f2d2681.js" crossorigin="anonymous"></script>

</body>

</html>